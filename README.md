# GitLab 扩展工具集

这是一个基于 Tampermonkey 的 GitLab 扩展工具集，包含两个主要功能模块，旨在提升 GitLab 使用体验和工作效率。

## 📁 项目结构

```
Tampermonkey/
├── FileFilter/                    # 文件过滤模块
│   ├── GitlabExtension_FilesFilter.js
│   └── README.md
├── TeamAssigner/                  # 团队分配模块
│   ├── GitlabExtension_TeamAssign.js
│   └── README.md
└── README.md                      # 项目总览
```

## 🚀 功能模块

### 1. 文件过滤模块 (FileFilter)

**功能描述：** 为 GitLab MR 页面提供强大的文件过滤功能，支持多规则配置和实时过滤。

**主要特性：**
- ✅ 支持多组文件过滤规则（支持正则表达式）
- ✅ 支持"包含"或"排除"两种过滤模式
- ✅ 在 MR diff 页面顶部栏快速切换过滤规则
- ✅ 支持项目级规则管理、导入导出、批量清理
- ✅ 兼容 GitLab 各类 MR 页面，自动适配主题
- ✅ 实时网络拦截，高效过滤大量文件

**适用场景：**
- 大型 MR 文件列表快速聚焦关键文件
- 团队/项目定制化文件过滤需求
- 提高代码审查效率

### 2. 团队分配模块 (TeamAssigner)

**功能描述：** 自动为 GitLab Merge Request 批量添加团队成员作为审查者。

**主要特性：**
- 🚀 一键添加团队成员作为 MR 审查者
- 👥 多团队管理，支持独立成员列表
- 🎯 智能团队匹配，基于项目路径自动选择
- 🔄 支持手动切换不同团队
- 🧹 一键清除所有审查者
- 💾 用户 ID 智能缓存，提升 API 效率
- 🎨 完美适配 GitLab 明暗主题
- 📝 可配置的日志系统
- ⚙️ 完整的图形化管理界面
- 🔒 严格用户名匹配，防止错误分配

**适用场景：**
- 团队协作中的自动化审查者分配
- 多项目多团队的管理需求
- 提升 MR 创建和分配效率

## 🛠️ 安装指南

### 前置要求
- 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展

### 安装步骤

#### 文件过滤模块
1. 打开 Tampermonkey 管理面板
2. 点击"创建新脚本"
3. 删除默认内容，粘贴 `FileFilter/GitlabExtension_FilesFilter.js` 的全部内容
4. 按 `Ctrl+S` 保存脚本

#### 团队分配模块
1. 打开 Tampermonkey 管理面板
2. 点击"创建新脚本"
3. 删除默认内容，粘贴 `TeamAssigner/GitlabExtension_TeamAssign.js` 的全部内容
4. 按 `Ctrl+S` 保存脚本

### 权限配置
确保脚本的 `@include` 规则匹配你的 GitLab 域名：
```javascript
// @include      https://git.ringcentral.com/*/-/merge_requests/*
```

## 📖 使用说明

### 文件过滤模块使用
1. 打开任意 GitLab MR diff 页面
2. 页面顶部会出现文件过滤控件
3. 点击"⚙️ Configure Filters"按钮配置项目规则
4. 勾选/切换规则后页面自动刷新并应用过滤

### 团队分配模块使用
1. 打开任意 GitLab Merge Request 页面
2. 右侧审查者区域会自动出现按钮：
   - 🔵 **Add [TeamName] (N)**: 添加当前团队成员作为审查者
   - 🔽 **Dropdown button (▼)**: 切换团队
   - 🗑️ **Clear All**: 清除所有审查者（仅在有审查者时显示）

## 🔧 高级功能

### 文件过滤模块
- **多规则支持**: 支持为不同项目配置多组过滤规则
- **正则表达式**: 支持复杂的文件路径匹配模式
- **项目级管理**: 每个项目可独立配置过滤规则
- **实时过滤**: 通过网络拦截实现高效的文件过滤

### 团队分配模块
- **智能缓存**: 内置用户 ID 映射，提升 API 调用效率
- **项目强制团队**: 为特定项目强制指定团队
- **版本化存储**: 不同版本数据独立存储，避免冲突
- **严格搜索**: 精确用户名匹配，防止误分配

## 🎨 界面特性

- **主题适配**: 完美支持 GitLab 明暗主题
- **响应式设计**: 适配不同屏幕尺寸
- **动态按钮**: 根据当前状态智能显示/隐藏按钮
- **统一风格**: 与 GitLab 原生界面保持一致

## 🔍 故障排除

### 常见问题

1. **按钮未显示**
   - 确认在 GitLab MR 页面（非编辑页面）
   - 检查脚本是否正确安装并启用
   - 刷新页面或等待脚本加载

2. **功能异常**
   - 检查网络连接
   - 确认用户名拼写正确（严格匹配模式）
   - 查看浏览器控制台错误信息
   - 确认项目访问权限

3. **数据丢失**
   - 检查脚本版本是否变更
   - 不同版本数据独立存储
   - 可手动迁移数据或重新配置

### 调试步骤
1. 通过管理界面启用日志功能
2. 打开浏览器控制台（F12）
3. 重现问题并查看日志输出
4. 根据错误信息进行相应处理

## 📦 版本信息

### 文件过滤模块
- **当前版本**: v1.0.0
- **功能**: 基础文件过滤功能

### 团队分配模块
- **当前版本**: v1.1.5
- **最新功能**: 严格用户搜索模式、项目强制团队功能

## 🤝 贡献指南

欢迎通过 Issues 和 Pull Requests 来改进这个项目！

## 📄 许可证

本项目采用 MIT 许可证。

## 👨‍💻 作者

- **Daniel Yang** - 初始开发者

---

💡 **提示**: 如果遇到任何问题或有功能建议，请通过 GitLab Issues 联系我们！ 